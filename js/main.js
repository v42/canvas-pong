(function(){for(var e=0,n=["webkit","moz"],t=0;n.length>t&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[n[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[t]+"CancelAnimationFrame"]||window[n[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),i=Math.max(0,16-(t-e)),o=window.setTimeout(function(){n(t+i)},i);return e=t+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})})(),function(){var e=function(){var e,n,t,i,o,d,w,s=800,a=600,c=!1,i=function(){this.x=0,this.y=a/2-30,this.w=10,this.h=60,this.up=!1,this.down=!1,this.speed=10,this.points=0},w={x:s/2-5,y:a/2-5,w:10,h:10,speedX:3,speedY:0,reset:function(e){this.x=s/2-5,this.y=a/2-5,this.speedX=2==e?-3:3,this.speedY=0}},u=function(){var w,c;bgc=document.getElementById("background"),c=document.getElementById("game"),w=document.getElementById("gui"),bgc.width=c.width=w.width=s,bgc.height=c.height=w.height=a,e=bgc.getContext("2d"),t=c.getContext("2d"),n=w.getContext("2d"),o=new i,o.x=10,d=new i,d.x=s-d.w-10,y(),p(),document.getElementById("wrapper").style.fontFamily="Rationale",window.setTimeout(function(){m()},100),r()},r=function(){h(),l(),window.requestAnimationFrame(r)},p=function(){e.fillStyle="rgb(255,255,255)";for(var n=0;28>n;n++)e.fillRect(397,21*n+10,6,15)},y=function(){window.onkeydown=function(e){var e=e||window.event;switch(e.keyCode){case 87:o.up=!0;break;case 83:o.down=!0;break;case 38:d.up=!0;break;case 40:d.down=!0}},window.onkeyup=function(e){var e=e||window.event;switch(e.keyCode){case 87:o.up=!1;break;case 83:o.down=!1;break;case 38:d.up=!1;break;case 40:d.down=!1}}},h=function(){(o.up||o.down)&&(o.up&&!o.down&&o.y>=10+o.speed&&(o.y-=o.speed),o.down&&!o.up&&o.y<=a-o.h-o.speed-10&&(o.y+=o.speed)),(d.up||d.down)&&(d.up&&!d.down&&d.y>=10+d.speed&&(d.y-=d.speed),d.down&&!d.up&&d.y<=a-d.h-d.speed-10&&(d.y+=d.speed)),(10>=w.y||w.y>=a-10-w.h)&&(w.speedY=-w.speedY),c||(w.x+=w.speedX,w.y+=w.speedY,0>w.speedX&&w.x<=o.x+o.w&&(-w.speedX>w.w||w.x>=o.x)&&w.y+w.h>=o.y&&w.y<=o.y+o.h&&(w.x<o.x+o.w&&(w.x=o.x+o.w),w.speedX=-w.speedX+1,w.speedY-=(o.y+o.h/2-(w.y+w.h/2))/5),w.speedX>0&&w.x+w.w>=d.x&&(w.speedX>w.w||w.x+w.w<=d.x+d.w)&&w.y+w.h>=d.y&&w.y<=d.y+d.h&&(w.x>d.x&&(w.x=d.x),w.speedX=-w.speedX-1,w.speedY-=(d.y+d.h/2-(w.y+w.h/2))/5)),w.x>=s+w.w&&(o.points++,w.reset(),m()),w.x<=0-w.w&&(d.points++,w.reset(2),m())},l=function(){t.clearRect(0,0,s,a),t.fillStyle="rgb(255,255,255)",t.fillRect(w.x,w.y,w.w,w.h),t.fillRect(o.x,o.y,o.w,o.h),t.fillRect(d.x,d.y,d.w,d.h)},m=function(e){n.clearRect(0,0,s,a),n.fillStyle="rgb(255,255,255)",n.font="bold 60px Rationale, sans-serif",n.fillText(o.points,s/2-120,50),n.fillText(d.points,s/2+100,50),e&&(c=!0,window.setTimeout(function(){c=!1},2e3))};return{init:u}}();e.init()}();